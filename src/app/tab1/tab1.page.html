<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>PhishGuard Analyzer</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <h1 class="ion-text-center">Bienvenue sur PhishGuard !</h1>
  <p class="ion-text-center ion-margin-bottom">
    Analysez un lien ou un texte suspect pour √©valuer son risque de phishing.
  </p>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Analyse de Risque</ion-card-title>
      <ion-card-subtitle>Collez ici l'URL ou le contenu de l'e-mail √† v√©rifier.</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>


      <ion-textarea [autoGrow]="true" label="Texte ou URL" labelPlacement="stacked"
        placeholder="https://www.site-suspect.com/..." fill="outline" rows="6" [(ngModel)]="userInput"></ion-textarea>

      <div class="ion-text-center ion-padding-top">
        <ion-button (click)="analyze()" [disabled]="userInput.length === 0" expand="block" color="success">
          Analyser la Menace
        </ion-button>

        <ion-button (click)="resetAnalysis()" expand="block" fill="clear" color="medium" class="ion-margin-top">
          R√©initialiser
        </ion-button>
      </div>

    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="analysisResult" class="ion-margin-top">
    <ion-card-header>
      <ion-card-title [color]="analysisResult?.level" class="ion-text-wrap">
        <ion-icon slot="start"
          [name]="analysisResult?.level === 'safe' ? 'shield-checkmark' : (analysisResult?.level === 'danger' ? 'warning' : 'help-circle')">
        </ion-icon>

        <span *ngIf="analysisResult?.level === 'safe'">‚úÖ S√ªr : Aucun risque d√©tect√©</span>
        <span *ngIf="analysisResult?.level === 'suspicious'">‚ö†Ô∏è Suspect : Risque mod√©r√©</span>
        <span *ngIf="analysisResult?.level === 'danger'">üõë DANGER ! : Risque √âlev√©</span>
      </ion-card-title>
      <ion-card-subtitle>Score de risque : **{{ analysisResult?.score }}** points</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <h3>D√©tails de l'analyse :</h3>

      <ion-list lines="none">
        <ion-item *ngFor="let detail of analysisResult.details">
          <ion-label text-wrap>
            {{ detail.rule }}
            <p slot="end" class="ion-text-right" [ngClass]="{'danger-score': detail.points > 0}">
              (+{{ detail.points }})
            </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

</ion-content>